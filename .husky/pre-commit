#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ‘· Formatting, linting and checking the build before committing ğŸ‘·'

echo 'ğŸŒ¼ğŸŒ· Formatting code to make it prettier ğŸŒ¼ğŸŒ·'

# Format everything
npm run format

# Check ESLint Standards
npm run lint ||
(
    echo 'ğŸ˜¤ğŸ‘‹ ESLint Check Failed! ğŸ‘‹ğŸ˜¤ 
        Make the required changes above and try to commit again.'
    false; 
)

# Check tsconfig standards
npm run types ||
(
    echo 'ğŸ¤¡ğŸ˜‚ Failed Type check. ğŸ˜‚ğŸ¤¡
        Make the changes required above and try to commit again.'
    false;
)

# If everything passes... Now we can commit
echo 'ğŸ¤”... Alright.... Code looks OK... Trying to build now... ğŸ¤”'

npm run build ||
(
    echo 'ğŸš§ğŸ”¨ Build failed ğŸ”¨ğŸš§
            Next build failed: View the errors above to see why. 
    '
    false;
)

# If everything passes... Now we can commit
echo 'âœ… You win this time! Committing this now. âœ…'